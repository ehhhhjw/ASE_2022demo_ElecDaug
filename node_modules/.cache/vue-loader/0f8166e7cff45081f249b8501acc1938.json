{"remainingRequest":"E:\\LidarPlatformFrontend-hjw\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\LidarPlatformFrontend-hjw\\src\\components\\page\\Login.vue?vue&type=style&index=0&id=3a8bfd4e&scoped=true&lang=css&","dependencies":[{"path":"E:\\LidarPlatformFrontend-hjw\\src\\components\\page\\Login.vue","mtime":1628741922000},{"path":"E:\\LidarPlatformFrontend-hjw\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\LidarPlatformFrontend-hjw\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\LidarPlatformFrontend-hjw\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\LidarPlatformFrontend-hjw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\LidarPlatformFrontend-hjw\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.login-wrap {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    /* background: url(../../assets/img/bgd1.png) no-repeat; */\n\n    background: url(../../assets/img/bgd4.jpg) no-repeat;\n    background-size: cover;\n}\n.ms-title {\n    width: 100%;\n    line-height: 50px;\n    text-align: center;\n    font-size: 22px;\n    color: #fff;\n    border-bottom: 1px solid #ddd;\n}\n.ms-login {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 350px;\n    margin: -190px 0 0 -175px;\n    border-radius: 5px;\n    background: rgba(172, 105, 105, 0.6);\n}\n.ms-content {\n    padding: 30px 0px;\n}\n.login-btn {\n    text-align: center;\n}\n.login-btn button {\n    width: 100%;\n    height: 36px;\n    margin-bottom: 10px;\n}\n.login-tips {\n    font-size: 12px;\n    line-height: 10px;\n    color: #fff;\n}\nbody {\n    margin: 0;\n    padding: 0;\n    font-family: sans-serif;\n    background-size: cover;\n}\n.box {\n    position: absolute;\n    top: 47%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 400px;\n    padding: 40px 40px 20px 40px;\n    background: rgba(0, 0, 0, 0.6);\n    box-sizing: border-box;\n    box-shadow: 0 15px 25px rgba(0, 0, 0, 0.4);\n    border-radius: 10px;\n}\n.box h2 {\n    margin: 0 0 30px;\n    padding: 0;\n    color: #fff;\n    text-align: center;\n    font-size: 22px;\n}\n.box .inputBox {\n    position: relative;\n}\n.box .inputBox input {\n    width: 100%;\n    padding: 10px 0;\n    font-size: 16px;\n    color: #fff;\n    letter-spacing: 1px;\n    margin-bottom: 30px;\n    border: none;\n    border-bottom: 1px solid #fff;\n    outline: none;\n    background: transparent;\n}\n.box .inputBox label {\n    position: absolute;\n    top: 0;\n    left: 0;\n    padding: 10px 0;\n    letter-spacing: 1px;\n    font-size: 16px;\n    color: #fff;\n    pointer-events: none;\n    transition: 0.5s;\n}\n.box .inputBox input:focus ~ label,\n.box .inputBox input:valid ~ label {\n    top: -18px;\n    left: 0;\n    color: #03a9f4;\n    font-size: 12px;\n}\n.box input[type='submit'] {\n    background: transparent;\n    border: none;\n    outline: none;\n    color: #fff;\n    background: #03a9f4;\n    padding: 10px 20px;\n    cursor: pointer;\n    border-radius: 5px;\n}\n",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n    <div class=\"login-wrap\">\n        <div class=\"box\">\n            <!-- <div class=\"ms-title\" style=\"line-height:30px\">基于对抗生成技术的激光雷达<br>点云测试数据扩增系统</div> -->\n            <div class=\"ms-title\">智能系统软件测试数据生成平台</div>\n            <el-form :model=\"loginForm\" :rules=\"loginFormRules\" ref=\"loginFormRef\" label-width=\"0px\" class=\"ms-content\">\n                <el-form-item prop=\"username\">\n                    <el-input v-model=\"loginForm.username\" placeholder=\"username\">\n                        <el-button slot=\"prepend\" icon=\"el-icon-user-solid\"></el-button>\n                    </el-input>\n                </el-form-item>\n                <el-form-item prop=\"password\">\n                    <el-input type=\"password\" placeholder=\"password\" v-model=\"loginForm.password\" @keyup.enter.native=\"submitForm()\">\n                        <el-button slot=\"prepend\" icon=\"el-icon-s-goods\"></el-button>\n                    </el-input>\n                </el-form-item>\n                <div class=\"login-btn\">\n                    <el-button\n                        type=\"primary\"\n                        @click=\"submitForm()\"\n                        :loading=\"loading\"\n                        element-loading-spinner=\"el-icon-loading\"\n                        element-loading-text=\"登录中\"\n                        >登录</el-button\n                    >\n                </div>\n                <p class=\"login-tips\">Tips : 本系统暂未开放注册功能。</p>\n            </el-form>\n        </div>\n    </div>\n</template>\n<script>\nimport qs from 'qs';\nimport { setInterval, clearInterval } from 'timers';\nexport default {\n    inject: ['reload'],\n    data: function() {\n        return {\n            loginForm: {\n                username: '',\n                password: ''\n            },\n            loginFormRules: {\n                username: [{ required: true, message: '账号不可为空', trigger: 'blur' }],\n                password: [{ required: true, message: '密码不可为空', trigger: 'blur' }]\n            },\n            loading: false,\n            flag: true,\n            lastTime: new Date().getTime(),\n            currentTime: new Date().getTime(),\n            timeOut: 10 * 1000,\n            last_time_upgrade: true\n        };\n    },\n    mounted() {\n        this.timer = setInterval(\n            function() {\n                var that = this;\n                this.currentTime = new Date().getTime();\n                if (this.last_time_upgrade == true) {\n                    this.lastTime = new Date().getTime();\n                }\n\n                if (this.currentTime - this.lastTime > this.timeOut) {\n                    this.last_time_upgrade = true;\n                    this.loading = false;\n                    this.flag === true;\n                    this.reload();\n                    return this.$message.error('登录超时,请检查网络并刷新');\n                }\n            }.bind(this),\n            5000\n        );\n    },\n    beforeDestroy() {\n        clearInterval(this.timer);\n    },\n    methods: {\n        cancelRequest() {\n            if (typeof this.source === 'function') {\n                this.source('终止请求');\n            }\n        },\n        submitForm() {\n            var that = this;\n            var CancelToken = this.$http.CancelToken;\n            var source = CancelToken.source();\n            this.loading = true;\n\n            this.$refs.loginFormRef.validate(async valid => {\n                if (valid) {\n                    if (this.flag === true) {\n                        this.flag = false;\n                        this.last_time_upgrade = false;\n\n                        this.cancelRequest();\n                        console.log('$axios.defaults.baseURL:', this.$http.defaults.baseURL);\n                        const { data: data } = await this.$http.post('/user/login/', qs.stringify(this.loginForm), {\n                            cancelToken: new this.$http.CancelToken(function executor(c) {\n                                that.source = c;\n                            })\n                        });\n\n                        if (data.code !== 20000) {\n                            this.loginForm.password = '';\n                            this.loading = false;\n                            this.last_time_upgrade = true;\n                            this.loading = false;\n                            this.reload();\n                            return this.$message.error('登录失败,请检查用户名或密码是否正确');\n                        } else {\n                            this.$store.commit('setToken', null);\n\n                            window.sessionStorage.setItem('username', this.loginForm.username);\n                            window.sessionStorage.setItem('password', this.loginForm.password);\n                            this.$store.commit('setUserId', data.data.profile.id);\n                            this.$store.commit('setUserId', data.data.profile.id);\n\n                            this.$store.commit('setToken', data.data.token);\n                            // console.log('data.data.token:', data.data.token);\n                            this.$store.commit('setUsername', this.loginForm.username);\n\n                            this.$store.commit('setUser_group_name', data.data.profile.user_group_name);\n                            this.getUserRight();\n                            this.$message.success('登录成功');\n\n                            this.$router.push('/dashboard');\n                            this.loading = false;\n                            this.flag = true;\n                        }\n                    }\n                }\n            });\n        },\n        async getUserRight() {\n            const { data: data } = await this.$http.get('/user/');\n\n            this.$store.commit('setNickName', data.data.nickname);\n        }\n    }\n};\n</script>\n<style scoped>\n.login-wrap {\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    /* background: url(../../assets/img/bgd1.png) no-repeat; */\n\n    background: url(../../assets/img/bgd4.jpg) no-repeat;\n    background-size: cover;\n}\n.ms-title {\n    width: 100%;\n    line-height: 50px;\n    text-align: center;\n    font-size: 22px;\n    color: #fff;\n    border-bottom: 1px solid #ddd;\n}\n.ms-login {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    width: 350px;\n    margin: -190px 0 0 -175px;\n    border-radius: 5px;\n    background: rgba(172, 105, 105, 0.6);\n}\n.ms-content {\n    padding: 30px 0px;\n}\n.login-btn {\n    text-align: center;\n}\n.login-btn button {\n    width: 100%;\n    height: 36px;\n    margin-bottom: 10px;\n}\n.login-tips {\n    font-size: 12px;\n    line-height: 10px;\n    color: #fff;\n}\nbody {\n    margin: 0;\n    padding: 0;\n    font-family: sans-serif;\n    background-size: cover;\n}\n.box {\n    position: absolute;\n    top: 47%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 400px;\n    padding: 40px 40px 20px 40px;\n    background: rgba(0, 0, 0, 0.6);\n    box-sizing: border-box;\n    box-shadow: 0 15px 25px rgba(0, 0, 0, 0.4);\n    border-radius: 10px;\n}\n.box h2 {\n    margin: 0 0 30px;\n    padding: 0;\n    color: #fff;\n    text-align: center;\n    font-size: 22px;\n}\n.box .inputBox {\n    position: relative;\n}\n.box .inputBox input {\n    width: 100%;\n    padding: 10px 0;\n    font-size: 16px;\n    color: #fff;\n    letter-spacing: 1px;\n    margin-bottom: 30px;\n    border: none;\n    border-bottom: 1px solid #fff;\n    outline: none;\n    background: transparent;\n}\n.box .inputBox label {\n    position: absolute;\n    top: 0;\n    left: 0;\n    padding: 10px 0;\n    letter-spacing: 1px;\n    font-size: 16px;\n    color: #fff;\n    pointer-events: none;\n    transition: 0.5s;\n}\n.box .inputBox input:focus ~ label,\n.box .inputBox input:valid ~ label {\n    top: -18px;\n    left: 0;\n    color: #03a9f4;\n    font-size: 12px;\n}\n.box input[type='submit'] {\n    background: transparent;\n    border: none;\n    outline: none;\n    color: #fff;\n    background: #03a9f4;\n    padding: 10px 20px;\n    cursor: pointer;\n    border-radius: 5px;\n}\n</style>\n"]}]}