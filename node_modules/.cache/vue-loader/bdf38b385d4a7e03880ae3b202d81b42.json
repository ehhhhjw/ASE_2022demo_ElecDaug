{"remainingRequest":"/Users/hejiawei/Desktop/五月/LidarPlatformFrontend-hjw 2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hejiawei/Desktop/五月/LidarPlatformFrontend-hjw 2/src/components/page/Image_T_AugTaskAdd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hejiawei/Desktop/五月/LidarPlatformFrontend-hjw 2/src/components/page/Image_T_AugTaskAdd.vue","mtime":1653655518740},{"path":"/Users/hejiawei/Desktop/五月/LidarPlatformFrontend-hjw 2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hejiawei/Desktop/五月/LidarPlatformFrontend-hjw 2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hejiawei/Desktop/五月/LidarPlatformFrontend-hjw 2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hejiawei/Desktop/五月/LidarPlatformFrontend-hjw 2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport qs from 'qs';\nimport jsonp from 'jsonp';\nimport * as echarts from 'echarts';\nimport fileDownload from 'js-file-download';\n\nexport default {\n    name: 'baseform',\n    inject: ['reload'],\n    data() {\n        // var checkMethod = (rule, value, callback) => {\n        //     console.log('method:' + value);\n        //     if (value === '') {\n        //         return callback(new Error('生成方法不能为空'));\n        //     }\n        // };\n        return {\n            checked1: false,\n            checked2: false,\n            checked3: false,\n            checked4: false,\n            checked5: false,\n            preview_value: [],\n            previewDialogVisible: false,\n            preview_options: [],\n            data_x_o: [],\n            data_y_o: [],\n            data_x_g: [],\n            data_y_g: [],\n            buttons: true,\n            method_value: [],\n            type_value: '',\n            temp: [1, 1],\n            mark_group: {\n                marks1_10: {\n                    1: '1',\n                    10: {\n                        style: {\n                            width: '30px'\n                        },\n                        label: '10'\n                    }\n                }\n            },\n            activeNames: [null],\n            activeName: 'first',\n            form: {\n                augment_type_one: 0,\n                augment_type_two: 0,\n                augment_type_three: 0,\n                augment_type_four: 0,\n                augment_type_five: 0,\n                params: 1,\n                file: {}\n            },\n            FormRules: {\n                // // 验证用户名是否合法\n                // name: [{ required: true, message: '任务名不可为空', trigger: 'blur' }],\n                // // 验证密码是否合法\n                // augmentation_method: [{ required: true, message: '生成方法不可为空', trigger: 'blur' }]\n            },\n            // loadingMethod: false,\n            methods: [],\n            fileList: [],\n            typeList: [],\n            value: [],\n            options: [\n                {\n                    value: 'Transmission Metamorphic Methods',\n                    label: 'Transmission Metamorphic Methods',\n                    children: [\n                        {\n                            value: 'Radio Noise',\n                            label: 'Radio Noise'\n                        },\n                        {\n                            value: 'Signal Outage',\n                            label: 'Signal Outage'\n                        },\n                        {\n                            value: 'Signal Disruptions',\n                            label: 'Signal Disruptions'\n                        }\n                    ]\n                },\n                {\n                    value: 'Time-frequency Metamorphic Methods',\n                    label: 'Time-frequency Metamorphic Methods',\n                    children: [\n                        {\n                            value: 'Channel Transformation',\n                            label: 'Channel Transformation'\n                        },\n                        {\n                            value: 'Power Zooming',\n                            label: 'Power Zooming'\n                        }\n                    ]\n                }\n            ]\n        };\n    },\n    methods: {\n        async Preview(index) {\n            // GET:129.211.89.155:8050/showwavemessage?augment_type_one=0&augment_type_two=1&augment_type_three=0&augment_type_four=0&augment_type_five=0\n            let one = 0,\n                two = 0,\n                three = 0,\n                four = 0,\n                five = 0;\n            let file_name = '';\n            if (index == 1) {\n                one = 1;\n            } else if (index == 2) {\n                two = 1;\n            } else if (index == 3) {\n                three = 1;\n            } else if (index == 4) {\n                four = 1;\n            } else if (index == 5) {\n                five = 1;\n            }\n            console.log(\n                '/showwavemessage?augment_type_one=' +\n                    one +\n                    '&augment_type_two=' +\n                    two +\n                    '&augment_type_three=' +\n                    three +\n                    '&augment_type_four=' +\n                    four +\n                    '&augment_type_five=' +\n                    five\n            );\n            const { data: data } = await this.$http({\n                url:\n                    '/showwavemessage?augment_type_one=' +\n                    one +\n                    '&augment_type_two=' +\n                    two +\n                    '&augment_type_three=' +\n                    three +\n                    '&augment_type_four=' +\n                    four +\n                    '&augment_type_five=' +\n                    five,\n                method: 'get'\n            });\n            console.log('data:', data);\n            let details = [];\n            if (index == 1) {\n                details = data.detailsone;\n            } else if (index == 2) {\n                details = data.detailstwo;\n            } else if (index == 3) {\n                details = data.detailsthree;\n            } else if (index == 4) {\n                details = data.detailsfour;\n            } else if (index == 5) {\n                details = data.detailsfive;\n            }\n            console.log(details);\n            // console.log('data.details:', data.details);\n            // console.log('data.details[0]:', data.details[0]);\n            // console.log('data.details[0]:', data.details[0].data[0]);\n            for (let i = 0; i < details.length; i++) {\n                console.log('data.details[i]:', details[i]);\n                this.data_x_g.push(details[i].data[0]);\n                this.data_y_g.push(details[i].data[1]);\n                this.data_x_o.push(data.original[i].data[0]);\n                this.data_y_o.push(data.original[i].data[1]);\n            }\n\n            console.log(this.data_x_g);\n            console.log(this.data_y_g);\n            console.log(this.data_x_o);\n            console.log(this.data_y_o);\n            // console.log('data_x:', this.data_x);\n            // console.log('data_y:', this.data_y);\n            this.preview_options = [];\n            for (let i = 0; i < this.data_x_o.length; i++) {\n                let temp = {};\n                temp.value = '' + i;\n                temp.label = 'data' + i;\n                this.preview_options.push(temp);\n            }\n            console.log('this.preview_value:', this.preview_value);\n            this.previewDialogVisible = true;\n        },\n        async DownLoad(index) {\n            // GET:129.211.89.155:8050/downloadwave?augment_type_one=0&augment_type_two=0&augment_type_three=0&augment_type_four=1&augment_type_five=0\n            let one = 0,\n                two = 0,\n                three = 0,\n                four = 0,\n                five = 0;\n            let file_name = '';\n            if (index == 1) {\n                one = 1;\n                file_name = 'downloaddata_GN.json';\n            } else if (index == 2) {\n                two = 1;\n                file_name = 'downloaddata_RE.json';\n            } else if (index == 3) {\n                three = 1;\n                file_name = 'downloaddata_F.json';\n            } else if (index == 4) {\n                four = 1;\n                file_name = 'downloaddata_ST.json';\n            } else if (index == 5) {\n                five = 1;\n                file_name = 'downloaddata_Z.json';\n            }\n            const { data: data } = await this.$http({\n                url:\n                    '/downloadwave?augment_type_one=' +\n                    one +\n                    '&augment_type_two=' +\n                    two +\n                    '&augment_type_three=' +\n                    three +\n                    '&augment_type_four=' +\n                    four +\n                    '&augment_type_five=' +\n                    five,\n                method: 'get',\n                contentType: 'application/x-www-form-urlencoded',\n                responseType: 'blob'\n            });\n            console.log('download:', data);\n\n            fileDownload(data, file_name);\n        },\n        // 发送添加任务申请\n        onSubmit() {\n            this.loading = true;\n            this.form.master = this.$store.state.userId;\n            this.$refs.formRef.validate(async valid => {\n                if (1) {\n                    var adddata = new FormData();\n\n                    // name\n                    if (!this.checked1 && !this.checked2 && !this.checked3 && !this.checked4 && !this.checked5) {\n                        return this.$message.error('Please select the method! ');\n                    } else {\n                        this.form.augment_type_one = this.checked1 ? 1 : 0;\n                        this.form.augment_type_two = this.checked2 ? 1 : 0;\n                        this.form.augment_type_three = this.checked3 ? 1 : 0;\n                        this.form.augment_type_four = this.checked4 ? 1 : 0;\n                        this.form.augment_type_five = this.checked5 ? 1 : 0;\n                    }\n\n                    adddata.append('augment_type_one', this.form.augment_type_one);\n                    adddata.append('augment_type_two', this.form.augment_type_two);\n                    adddata.append('augment_type_three', this.form.augment_type_three);\n                    adddata.append('augment_type_four', this.form.augment_type_four);\n                    adddata.append('augment_type_five', this.form.augment_type_five);\n\n                    adddata.append('params', this.form.params);\n\n                    // file\n                    this.form.file = document.getElementById('filetemp').files[0];\n                    if (this.form.file) {\n                        adddata.append('file', this.form.file);\n                    } else {\n                        this.loading = false;\n                        return this.$message.error('Please upload the file! ');\n                    }\n\n                    for (var [a, b] of adddata.entries()) {\n                        console.log(a, b);\n                    }\n\n                    const { data: data } = await this.$http({\n                        url: 'uploadwave',\n                        data: adddata,\n                        method: 'post'\n                        // contentType: 'application/x-www-form-urlencoded',\n                        // responseType: 'blob'\n                    });\n                    console.log('data:', data);\n                    if (data.page == 200) {\n                        this.$message.success('Submitted successfully!');\n                        // 重置表单\n                        this.buttons = false;\n                    } else {\n                        this.$message.error('Submission failed!');\n                    }\n\n                    // console.log('重置表单');\n                    // this.reload();\n                    // this.$store.commit('storeToken', data.data.token);\n                }\n            });\n        },\n        Reset() {\n            this.reload();\n        },\n\n        async previewHandleChange() {\n            console.log('this.preview_value:', this.preview_value);\n            this.get_preview();\n        },\n        get_preview() {\n            var myChart = echarts.init(document.getElementById('preview'));\n            var option = {\n                title: {\n                    text: 'Input data'\n                },\n\n                tooltip: {\n                    trigger: 'axis',\n                    axisPointer: {\n                        animation: false\n                    }\n                },\n                xAxis: {\n                    type: 'category',\n                    data: this.data_x_o[parseInt(this.preview_value[0])]\n                },\n                yAxis: {\n                    type: 'value'\n                },\n                series: [\n                    {\n                        data: this.data_y_o[parseInt(this.preview_value[0])],\n                        type: 'line'\n                    }\n                ]\n            };\n            myChart.setOption(option);\n\n            var myChart2 = echarts.init(document.getElementById('preview2'));\n            var option2 = {\n                title: {\n                    text: 'Augmented data'\n                },\n                tooltip: {\n                    trigger: 'axis',\n                    axisPointer: {\n                        animation: false\n                    }\n                },\n                xAxis: {\n                    type: 'category',\n                    data: this.data_x_g[parseInt(this.preview_value[0])]\n                },\n                yAxis: {\n                    type: 'value'\n                },\n                series: [\n                    {\n                        data: this.data_y_g[parseInt(this.preview_value[0])],\n                        type: 'line'\n                    }\n                ]\n            };\n            myChart2.setOption(option2);\n        },\n\n        clickfiletemp() {\n            document.getElementById('filetemp').click();\n        },\n        reloadPage() {\n            this.reload();\n        },\n\n        handleChange(value) {\n            console.log(value);\n            this.form.augmentation_type_name = value[0];\n            this.form.augmentation_method_name = value[1];\n            console.log('this.form.augmentation_type_name:', this.form.augmentation_type_name);\n            console.log('this.form.augmentation_method_name:', this.form.augmentation_method_name);\n        },\n        // 上传文件[this.form.file赋值]\n        fileLoad() {\n            const selectedFile = this.$refs.image_t_file_ref.files[0];\n\n            let fileName = selectedFile.name;\n            let pos = fileName.lastIndexOf('.');\n            let lastName = fileName.substring(pos, fileName.length);\n            console.log(lastName, lastName.toLowerCase());\n            console.log('lastName:', lastName);\n            if (lastName.toLowerCase() !== '.json') {\n                this.$message.error('文件必须为 .json 类型');\n                // this.$refs.lidar_t_file_ref.clearFiles;\n                this.$refs.image_t_file_ref.value = ''; // 清空file文件\n                // return false;\n            } else {\n                this.form.file = selectedFile;\n                var str = document.getElementById('filetemp').value;\n                str = str.split('\\\\')[str.split('\\\\').length - 1];\n                document.getElementById('inputFileAgent').value = str;\n            }\n        },\n        clickLoad() {\n            this.$refs.refFile.dispatchEvent(new MouseEvent('click'));\n        }\n    }\n};\n",{"version":3,"sources":["Image_T_AugTaskAdd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Image_T_AugTaskAdd.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n    <div>\n        <div class=\"crumbs\">\n            <el-breadcrumb separator=\"/\">\n                <el-breadcrumb-item> <i class=\"el-icon-picture\"></i> Welcome to ElecDaug! </el-breadcrumb-item>\n            </el-breadcrumb>\n        </div>\n        <div class=\"container\">\n            <div>\n                <el-row :gutter=\"20\">\n                    <el-form ref=\"formRef\" :model=\"form\" :rules=\"FormRules\" label-width=\"100px\">\n                        <!-- <el-form-item label=\"Task Name\" prop=\"name\">\n                            <el-input v-model=\"form.name\" style=\"width: 500px\"></el-input>\n                        </el-form-item> -->\n\n                        <el-form-item label=\"Method\">\n                            <!-- <div class=\"block\">\n                                <el-cascader\n                                    style=\"width: 350px\"\n                                    v-model=\"method_value\"\n                                    :options=\"options\"\n                                    :props=\"{ expandTrigger: 'hover' }\"\n                                    @change=\"handleChange\"\n                                    placeholder=\"Select the method\"\n                                ></el-cascader>\n                            </div> -->\n                            <div>\n                                <div class=\"title\">\n                                    <span style=\"margin-right:410px\">Transmission Metamorphic Methods:</span>\n                                    <span>Time-frequency Metamorphic Methods:</span>\n                                </div>\n\n                                <div class=\"boxes\">\n                                    <el-checkbox v-model=\"checked1\" label=\"Radio Noise\" border size=\"medium\"></el-checkbox>\n                                    <el-checkbox v-model=\"checked2\" label=\"Signal Outage\" border size=\"medium\"></el-checkbox>\n                                    <el-checkbox\n                                        v-model=\"checked3\"\n                                        label=\"Signal Disruptions\"\n                                        border\n                                        size=\"medium\"\n                                        style=\"margin-right: 100px\"\n                                    ></el-checkbox>\n\n                                    <el-checkbox v-model=\"checked4\" label=\"Channel Transformation\" border size=\"medium\"></el-checkbox>\n                                    <el-checkbox v-model=\"checked5\" label=\"Power Zooming\" border size=\"medium\"></el-checkbox>\n                                </div>\n                            </div>\n                        </el-form-item>\n\n                        <el-form-item label=\"Params\">\n                            <div class=\"block\">\n                                <el-slider\n                                    v-model=\"form.params\"\n                                    :min=\"1\"\n                                    :max=\"10\"\n                                    :step=\"1\"\n                                    :marks=\"mark_group.marks1_10\"\n                                    style=\"width: 300px\"\n                                >\n                                </el-slider>\n                            </div>\n                        </el-form-item>\n\n                        <!-- <el-form-item label=\"上传文件\">\n                            <input type=\"file\" id=\"filetemp\" prop=\"form.file\" ref=\"image_t_file_ref\" @change=\"fileLoad\" />\n                        </el-form-item> -->\n\n                        <el-form-item label=\"Upload file\">\n                            <input\n                                type=\"file\"\n                                id=\"filetemp\"\n                                prop=\"form.file\"\n                                ref=\"image_t_file_ref\"\n                                style=\"display:none\"\n                                @change=\"fileLoad\"\n                            />\n                            <input type=\"text\" value=\"\" style=\"width: 200px\" disabled id=\"inputFileAgent\" />\n                            <input type=\"button\" @click=\"clickfiletemp\" value=\"Browse...\" />\n                            <br />\n                        </el-form-item>\n\n                        <!-- <el-form-item label=\"参数说明\">\n                            <el-input type=\"textarea\" v-model=\"form.desc\" autosize disabled></el-input>\n                        </el-form-item> -->\n                        <el-form-item>\n                            <el-button type=\"primary\" @click=\"onSubmit\" :disabled=\"!buttons\">Submit</el-button>\n                            <!-- <el-button type=\"primary\" @click=\"DownLoad\" :disabled=\"buttons\">DownLoad</el-button>\n                            <el-button type=\"primary\" @click=\"Preview\" :disabled=\"buttons\">Preview</el-button> -->\n                            <el-button @click=\"Reset\" :disabled=\"buttons\">Reset</el-button>\n                        </el-form-item>\n\n                        <el-form-item label=\"DownLoad\">\n                            <el-button type=\"primary\" @click=\"DownLoad(1)\" :disabled=\"buttons || !this.form.augment_type_one\"\n                                >Radio Noise</el-button\n                            >\n                            <el-button type=\"primary\" @click=\"DownLoad(2)\" :disabled=\"buttons || !this.form.augment_type_two\"\n                                >Signal Outage</el-button\n                            >\n                            <el-button type=\"primary\" @click=\"DownLoad(3)\" :disabled=\"buttons || !this.form.augment_type_three\"\n                                >Signal Disruptions</el-button\n                            >\n                            <el-button type=\"primary\" @click=\"DownLoad(4)\" :disabled=\"buttons || !this.form.augment_type_four\"\n                                >Channel Transformation</el-button\n                            >\n                            <el-button type=\"primary\" @click=\"DownLoad(5)\" :disabled=\"buttons || !this.form.augment_type_five\"\n                                >Power Zooming</el-button\n                            >\n                        </el-form-item>\n\n                        <el-form-item label=\"Preview\">\n                            <el-button type=\"warning\" @click=\"Preview(1)\" :disabled=\"buttons || !this.form.augment_type_one\"\n                                >Radio Noise</el-button\n                            >\n                            <el-button type=\"warning\" @click=\"Preview(2)\" :disabled=\"buttons || !this.form.augment_type_two\"\n                                >Signal Outage</el-button\n                            >\n                            <el-button type=\"warning\" @click=\"Preview(3)\" :disabled=\"buttons || !this.form.augment_type_three\"\n                                >Signal Disruptions</el-button\n                            >\n                            <el-button type=\"warning\" @click=\"Preview(4)\" :disabled=\"buttons || !this.form.augment_type_four\"\n                                >Channel Transformation</el-button\n                            >\n                            <el-button type=\"warning\" @click=\"Preview(5)\" :disabled=\"buttons || !this.form.augment_type_five\"\n                                >Power Zooming</el-button\n                            >\n                        </el-form-item>\n                    </el-form>\n                </el-row>\n                <!-- </el-row> -->\n            </div>\n        </div>\n        <!-- 生成点云预览 -->\n        <el-dialog title=\"Preview\" :visible.sync=\"previewDialogVisible\" width=\"1300px\" height=\"630px\" center>\n            <div style=\"height: 1200px\">\n                <div class=\"block\">\n                    <span class=\"demonstration right\">Select data</span>\n                    <el-cascader\n                        v-model=\"preview_value\"\n                        :options=\"preview_options\"\n                        :props=\"{ expandTrigger: 'hover' }\"\n                        @change=\"previewHandleChange\"\n                        style=\"width: 800px\"\n                    ></el-cascader>\n                    <div id=\"preview\" class=\"view1\"></div>\n                    <div id=\"preview2\" class=\"view1\"></div>\n                </div>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\nimport qs from 'qs';\nimport jsonp from 'jsonp';\nimport * as echarts from 'echarts';\nimport fileDownload from 'js-file-download';\n\nexport default {\n    name: 'baseform',\n    inject: ['reload'],\n    data() {\n        // var checkMethod = (rule, value, callback) => {\n        //     console.log('method:' + value);\n        //     if (value === '') {\n        //         return callback(new Error('生成方法不能为空'));\n        //     }\n        // };\n        return {\n            checked1: false,\n            checked2: false,\n            checked3: false,\n            checked4: false,\n            checked5: false,\n            preview_value: [],\n            previewDialogVisible: false,\n            preview_options: [],\n            data_x_o: [],\n            data_y_o: [],\n            data_x_g: [],\n            data_y_g: [],\n            buttons: true,\n            method_value: [],\n            type_value: '',\n            temp: [1, 1],\n            mark_group: {\n                marks1_10: {\n                    1: '1',\n                    10: {\n                        style: {\n                            width: '30px'\n                        },\n                        label: '10'\n                    }\n                }\n            },\n            activeNames: [null],\n            activeName: 'first',\n            form: {\n                augment_type_one: 0,\n                augment_type_two: 0,\n                augment_type_three: 0,\n                augment_type_four: 0,\n                augment_type_five: 0,\n                params: 1,\n                file: {}\n            },\n            FormRules: {\n                // // 验证用户名是否合法\n                // name: [{ required: true, message: '任务名不可为空', trigger: 'blur' }],\n                // // 验证密码是否合法\n                // augmentation_method: [{ required: true, message: '生成方法不可为空', trigger: 'blur' }]\n            },\n            // loadingMethod: false,\n            methods: [],\n            fileList: [],\n            typeList: [],\n            value: [],\n            options: [\n                {\n                    value: 'Transmission Metamorphic Methods',\n                    label: 'Transmission Metamorphic Methods',\n                    children: [\n                        {\n                            value: 'Radio Noise',\n                            label: 'Radio Noise'\n                        },\n                        {\n                            value: 'Signal Outage',\n                            label: 'Signal Outage'\n                        },\n                        {\n                            value: 'Signal Disruptions',\n                            label: 'Signal Disruptions'\n                        }\n                    ]\n                },\n                {\n                    value: 'Time-frequency Metamorphic Methods',\n                    label: 'Time-frequency Metamorphic Methods',\n                    children: [\n                        {\n                            value: 'Channel Transformation',\n                            label: 'Channel Transformation'\n                        },\n                        {\n                            value: 'Power Zooming',\n                            label: 'Power Zooming'\n                        }\n                    ]\n                }\n            ]\n        };\n    },\n    methods: {\n        async Preview(index) {\n            // GET:129.211.89.155:8050/showwavemessage?augment_type_one=0&augment_type_two=1&augment_type_three=0&augment_type_four=0&augment_type_five=0\n            let one = 0,\n                two = 0,\n                three = 0,\n                four = 0,\n                five = 0;\n            let file_name = '';\n            if (index == 1) {\n                one = 1;\n            } else if (index == 2) {\n                two = 1;\n            } else if (index == 3) {\n                three = 1;\n            } else if (index == 4) {\n                four = 1;\n            } else if (index == 5) {\n                five = 1;\n            }\n            console.log(\n                '/showwavemessage?augment_type_one=' +\n                    one +\n                    '&augment_type_two=' +\n                    two +\n                    '&augment_type_three=' +\n                    three +\n                    '&augment_type_four=' +\n                    four +\n                    '&augment_type_five=' +\n                    five\n            );\n            const { data: data } = await this.$http({\n                url:\n                    '/showwavemessage?augment_type_one=' +\n                    one +\n                    '&augment_type_two=' +\n                    two +\n                    '&augment_type_three=' +\n                    three +\n                    '&augment_type_four=' +\n                    four +\n                    '&augment_type_five=' +\n                    five,\n                method: 'get'\n            });\n            console.log('data:', data);\n            let details = [];\n            if (index == 1) {\n                details = data.detailsone;\n            } else if (index == 2) {\n                details = data.detailstwo;\n            } else if (index == 3) {\n                details = data.detailsthree;\n            } else if (index == 4) {\n                details = data.detailsfour;\n            } else if (index == 5) {\n                details = data.detailsfive;\n            }\n            console.log(details);\n            // console.log('data.details:', data.details);\n            // console.log('data.details[0]:', data.details[0]);\n            // console.log('data.details[0]:', data.details[0].data[0]);\n            for (let i = 0; i < details.length; i++) {\n                console.log('data.details[i]:', details[i]);\n                this.data_x_g.push(details[i].data[0]);\n                this.data_y_g.push(details[i].data[1]);\n                this.data_x_o.push(data.original[i].data[0]);\n                this.data_y_o.push(data.original[i].data[1]);\n            }\n\n            console.log(this.data_x_g);\n            console.log(this.data_y_g);\n            console.log(this.data_x_o);\n            console.log(this.data_y_o);\n            // console.log('data_x:', this.data_x);\n            // console.log('data_y:', this.data_y);\n            this.preview_options = [];\n            for (let i = 0; i < this.data_x_o.length; i++) {\n                let temp = {};\n                temp.value = '' + i;\n                temp.label = 'data' + i;\n                this.preview_options.push(temp);\n            }\n            console.log('this.preview_value:', this.preview_value);\n            this.previewDialogVisible = true;\n        },\n        async DownLoad(index) {\n            // GET:129.211.89.155:8050/downloadwave?augment_type_one=0&augment_type_two=0&augment_type_three=0&augment_type_four=1&augment_type_five=0\n            let one = 0,\n                two = 0,\n                three = 0,\n                four = 0,\n                five = 0;\n            let file_name = '';\n            if (index == 1) {\n                one = 1;\n                file_name = 'downloaddata_GN.json';\n            } else if (index == 2) {\n                two = 1;\n                file_name = 'downloaddata_RE.json';\n            } else if (index == 3) {\n                three = 1;\n                file_name = 'downloaddata_F.json';\n            } else if (index == 4) {\n                four = 1;\n                file_name = 'downloaddata_ST.json';\n            } else if (index == 5) {\n                five = 1;\n                file_name = 'downloaddata_Z.json';\n            }\n            const { data: data } = await this.$http({\n                url:\n                    '/downloadwave?augment_type_one=' +\n                    one +\n                    '&augment_type_two=' +\n                    two +\n                    '&augment_type_three=' +\n                    three +\n                    '&augment_type_four=' +\n                    four +\n                    '&augment_type_five=' +\n                    five,\n                method: 'get',\n                contentType: 'application/x-www-form-urlencoded',\n                responseType: 'blob'\n            });\n            console.log('download:', data);\n\n            fileDownload(data, file_name);\n        },\n        // 发送添加任务申请\n        onSubmit() {\n            this.loading = true;\n            this.form.master = this.$store.state.userId;\n            this.$refs.formRef.validate(async valid => {\n                if (1) {\n                    var adddata = new FormData();\n\n                    // name\n                    if (!this.checked1 && !this.checked2 && !this.checked3 && !this.checked4 && !this.checked5) {\n                        return this.$message.error('Please select the method! ');\n                    } else {\n                        this.form.augment_type_one = this.checked1 ? 1 : 0;\n                        this.form.augment_type_two = this.checked2 ? 1 : 0;\n                        this.form.augment_type_three = this.checked3 ? 1 : 0;\n                        this.form.augment_type_four = this.checked4 ? 1 : 0;\n                        this.form.augment_type_five = this.checked5 ? 1 : 0;\n                    }\n\n                    adddata.append('augment_type_one', this.form.augment_type_one);\n                    adddata.append('augment_type_two', this.form.augment_type_two);\n                    adddata.append('augment_type_three', this.form.augment_type_three);\n                    adddata.append('augment_type_four', this.form.augment_type_four);\n                    adddata.append('augment_type_five', this.form.augment_type_five);\n\n                    adddata.append('params', this.form.params);\n\n                    // file\n                    this.form.file = document.getElementById('filetemp').files[0];\n                    if (this.form.file) {\n                        adddata.append('file', this.form.file);\n                    } else {\n                        this.loading = false;\n                        return this.$message.error('Please upload the file! ');\n                    }\n\n                    for (var [a, b] of adddata.entries()) {\n                        console.log(a, b);\n                    }\n\n                    const { data: data } = await this.$http({\n                        url: 'uploadwave',\n                        data: adddata,\n                        method: 'post'\n                        // contentType: 'application/x-www-form-urlencoded',\n                        // responseType: 'blob'\n                    });\n                    console.log('data:', data);\n                    if (data.page == 200) {\n                        this.$message.success('Submitted successfully!');\n                        // 重置表单\n                        this.buttons = false;\n                    } else {\n                        this.$message.error('Submission failed!');\n                    }\n\n                    // console.log('重置表单');\n                    // this.reload();\n                    // this.$store.commit('storeToken', data.data.token);\n                }\n            });\n        },\n        Reset() {\n            this.reload();\n        },\n\n        async previewHandleChange() {\n            console.log('this.preview_value:', this.preview_value);\n            this.get_preview();\n        },\n        get_preview() {\n            var myChart = echarts.init(document.getElementById('preview'));\n            var option = {\n                title: {\n                    text: 'Input data'\n                },\n\n                tooltip: {\n                    trigger: 'axis',\n                    axisPointer: {\n                        animation: false\n                    }\n                },\n                xAxis: {\n                    type: 'category',\n                    data: this.data_x_o[parseInt(this.preview_value[0])]\n                },\n                yAxis: {\n                    type: 'value'\n                },\n                series: [\n                    {\n                        data: this.data_y_o[parseInt(this.preview_value[0])],\n                        type: 'line'\n                    }\n                ]\n            };\n            myChart.setOption(option);\n\n            var myChart2 = echarts.init(document.getElementById('preview2'));\n            var option2 = {\n                title: {\n                    text: 'Augmented data'\n                },\n                tooltip: {\n                    trigger: 'axis',\n                    axisPointer: {\n                        animation: false\n                    }\n                },\n                xAxis: {\n                    type: 'category',\n                    data: this.data_x_g[parseInt(this.preview_value[0])]\n                },\n                yAxis: {\n                    type: 'value'\n                },\n                series: [\n                    {\n                        data: this.data_y_g[parseInt(this.preview_value[0])],\n                        type: 'line'\n                    }\n                ]\n            };\n            myChart2.setOption(option2);\n        },\n\n        clickfiletemp() {\n            document.getElementById('filetemp').click();\n        },\n        reloadPage() {\n            this.reload();\n        },\n\n        handleChange(value) {\n            console.log(value);\n            this.form.augmentation_type_name = value[0];\n            this.form.augmentation_method_name = value[1];\n            console.log('this.form.augmentation_type_name:', this.form.augmentation_type_name);\n            console.log('this.form.augmentation_method_name:', this.form.augmentation_method_name);\n        },\n        // 上传文件[this.form.file赋值]\n        fileLoad() {\n            const selectedFile = this.$refs.image_t_file_ref.files[0];\n\n            let fileName = selectedFile.name;\n            let pos = fileName.lastIndexOf('.');\n            let lastName = fileName.substring(pos, fileName.length);\n            console.log(lastName, lastName.toLowerCase());\n            console.log('lastName:', lastName);\n            if (lastName.toLowerCase() !== '.json') {\n                this.$message.error('文件必须为 .json 类型');\n                // this.$refs.lidar_t_file_ref.clearFiles;\n                this.$refs.image_t_file_ref.value = ''; // 清空file文件\n                // return false;\n            } else {\n                this.form.file = selectedFile;\n                var str = document.getElementById('filetemp').value;\n                str = str.split('\\\\')[str.split('\\\\').length - 1];\n                document.getElementById('inputFileAgent').value = str;\n            }\n        },\n        clickLoad() {\n            this.$refs.refFile.dispatchEvent(new MouseEvent('click'));\n        }\n    }\n};\n</script>\n\n<style scoped>\n.marginRight {\n    margin-right: 10px !important;\n}\n.view1 {\n    width: 1200px;\n    height: 530px;\n    margin: 0 10px 0 0;\n    background-color: #fff;\n    float: left;\n}\n</style>\n"]}]}